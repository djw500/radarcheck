[supervisord]
nodaemon=true
logfile=/app/logs/supervisord.log
pidfile=/tmp/supervisord.pid

[program:web]
command=gunicorn -b 0.0.0.0:5000 --workers 2 --timeout 120 app:app
directory=/app
autostart=true
autorestart=true
stdout_logfile=/app/logs/web.log
stderr_logfile=/app/logs/web_error.log

[program:tile_builder]
command=python scripts/build_tiles_scheduled.py
directory=/app
autostart=true
autorestart=true
startsecs=10
stdout_logfile=/app/logs/tile_builder.log
stderr_logfile=/app/logs/tile_builder_error.log
environment=TILE_BUILD_INTERVAL_MINUTES="15",TILE_BUILD_MAX_HOURS_HRRR="24",TILE_BUILD_MAX_HOURS_GFS="168"
